<!doctype html>
<html>
    <head>
        <style>
            * {
                font-family: monospace;
            }   
            body {
                display: flex;
                justify-content: center;
            }
            #contentarea {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: 0px;
                bottom: 0px;
                max-width: 1024px;
            }
        </style>
    </head>
    <body>
        <div id="contentarea">
            <h1>GIT in the browser</h1>
            <p>
                <em>
                    A demonstration of the <a href="https://github.com/petersalomonsen/wasm-git">WASM-git</a> project.
                    This is open for testing and demo purposes only. <b>Please don't abuse!</b>
                </em>            
            </p>
            
            <div style="display: flex">
                <input id="gitrepourl" style="background-color: #eee; padding: 5px; flex-grow:1" onchange="synclocal()" />
                <button onclick="clone()" id="clonebutton">Clone</button>
            </div>

            <br />
            <template id="dircontentline">
                <div style="display: flex;">
                    <a id="filename" style="flex-grow: 1; text-overflow: ellipsis;" href="#"
                        onclick="event.preventDefault();opendirentry(this.innerHTML)"></a>
                    <button id="editbutton">edit</button>
                </div>
            </template>
            <div id="dircontents">
            </div>
            
            <br />
            <div style="display: none;" id="commandtoolbar">
                <button onclick="gitcommand('pull')">Pull</button>
                <button onclick="gitcommand('log')">Log</button>
                <button onclick="gitcommand('status')">Status</button>
                <button onclick="deletelocal()">Delete local clone</button>
            </div>
            <div id="console" readonly 
                style="background-color: black; 
                    flex-grow: 1;
                    color: green; width: 100%; height: 200px; overflow: auto" >
            </div>
        </div>
        <template id="editortemplate">
            <div id="editor" style="
                    display: flex;
                    flex-direction: column;
                    position: absolute;
                    top: 0px;
                    bottom: 0px;
                    left: 0px;
                    right: 0px;
                    padding: 10px;
                    background-color: rgba(255,255,255,0.95);
                    z-index: 10000;">
                <p>
                    <button id="savebutton">save</button>
                    <button id="cancelbutton">cancel</button>
                    <input type="text" id="filenamefield" title="filename" />
                </p>
                <textarea style="flex-grow: 1; width: 100%; height: 100%"></textarea>
            </div>
        </template>
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script src="main.js"></script>
    </body>
</html>
